Project Name: NativeHub (Rust 原生 GitHub 终端)
1. 项目愿景 (Vision)
构建一个0% 浏览器内核、100% Rust 原生的 GitHub 客户端。 它结合了 gh CLI 的高效操作逻辑与 Native GUI 的极速浏览体验。旨在解决官方移动端功能阉割、PC 端依赖 Electron 臃肿卡顿的痛点。

核心哲学：

极客审美： 像游戏控制台一样的 UI，无 HTML/CSS。

极致性能： 启动即用，内存占用 <50MB。

全功能覆盖： 不仅是 CLI 的 GUI 壳，更是代码阅读器和数据可视化中心。

2. 技术栈选型 (Tech Stack)
组件,选型,理由
编程语言,Rust (2024 Edition),内存安全，跨平台，高性能。
GUI 框架,egui (Immediate Mode),纯 Rust 编写，无浏览器内核，支持 OpenGL/Vulkan，极易复刻 CLI 风格。
HTTP 客户端,reqwest,异步网络请求标准库。
异步运行时,tokio,处理并发网络和 IO。
Markdown 渲染,egui_commonmark,在 egui 中原生绘制 Markdown，无需 HTML。
代码高亮,syntect,基于 .sublime-syntax 的原生高亮库，极速。
图表绘制,egui_plot,绘制贡献墙、流量图、曲线图。
安全存储,keyring,跨平台存储 OAuth Token (KeyStore/Keychain)。
序列化,serde & serde_json,处理 API JSON 数据。


3. 系统架构设计 (Architecture)
3.1 核心架构模式：双引擎驱动 (Hybrid Engine)
为了兼容 PC (有 gh) 和 Android (无 gh)，采用策略模式：

UI Layer (View): 纯 egui 绘制，只负责展示，不含业务逻辑。

Abstraction Layer (Trait): 定义统一行为，如 login(), fetch_issues(), get_code().

Engine A (Shell Wrapper): (PC 首选) 调用系统 gh 进程，解析 Stdout。

Engine B (Native API): (Android 唯一，PC 备选) 直接调用 GitHub REST/GraphQL API。

3.2 目录结构 (Directory Structure)
native_hub/
├── Cargo.toml
├── src/
│   ├── main.rs            // 入口，初始化 egui App
│   ├── app.rs             // UI 主循环，状态管理
│   ├── context.rs         // 全局上下文 (Token, UserInfo, Theme)
│   ├── ui/                // 界面组件
│   │   ├── mod.rs
│   │   ├── sidebar.rs     // 侧边栏 (Repo List)
│   │   ├── terminal.rs    // 底部伪终端
│   │   ├── code_view.rs   // 代码阅读器
│   │   └── charts.rs      // 贡献图/流量图
│   ├── engine/            // 核心逻辑
│   │   ├── mod.rs         // Trait 定义
│   │   ├── gh_cli.rs      // Shell 调用实现
│   │   └── api_client.rs  // REST API 实现
│   ├── modules/           // 业务模块
│   │   ├── auth.rs        // 登录 (Device Flow)
│   │   ├── issue.rs       // Issue/PR 管理
│   │   └── repo.rs        // 仓库信息 & 文件树
│   └── utils/
│       └── syntax.rs      // 高亮逻辑封装

4. 核心功能模块详细设计 (Modules)
模块一：身份认证 (Auth Module)
策略： OAuth Device Flow (设备代码模式)。

流程： App 请求代码 -> 用户去浏览器验证 -> App 轮询获取 Token -> 存入 Keyring。

UI： 一个极简的弹窗，显示 ABCD-1234 和“复制”按钮。

模块二：仓库与文件浏览 (Explorer Module)
Tree View： 递归调用 API /repos/{owner}/{repo}/contents/{path}。使用 egui::CollapsingHeader 实现折叠效果。

Blob View (代码阅读)：

获取文件 raw content。

检测文件扩展名 (.rs, .py)。

调用 syntect 生成带颜色的 LayoutJob。

亮点： 实现行号显示、双击复制。

模块三：数据可视化 (Stats Module - 娱乐核心)
贡献墙 (Green Wall)：

数据源： GraphQL 查询 user { contributionsCollection { ... } }。

绘制： 使用 egui::Painter。计算 52x7 个矩形坐标，根据 count 映射颜色透明度。

流量图/Star 趋势：

组件： egui_plot::Line 和 Bar。

交互： 鼠标悬停显示具体数值。

模块四：个人主页 (Profile Module)
布局： * 左侧：圆形头像 (egui_extras::RetainedImage) + 名字 + Bio。

右侧：Pinned Repos (卡片式布局)。

底部：贡献墙。

模块五：Issue/PR 管理 (Interaction Module)
列表： 类似 Email 客户端的紧凑列表。

详情： Markdown 渲染区。

评论： 底部输入框，支持快捷回复（LGTM, +1）。

5. 开发路线图 (Roadmap for IDE AI)
请指示你的 AI 助手按此顺序生成代码：

Phase 1: 骨架搭建 (Skeleton)
初始化 Tauri (或者纯 Rust binary) + egui。

搭建基本的 UI 布局（左侧边栏，右主区域，底栏）。

实现 Device Flow 登录，确保能拿到 Token 并打印出来。

Phase 2: 基础浏览 (Read-Only)
实现 Repo List：获取当前用户的仓库列表并显示。

实现 Issue List：点击仓库，显示 Issue 列表。

接入 egui_commonmark，正确渲染 Issue 的正文。

Phase 3: 核心攻坚 (Browser)
实现 File Tree：能够点进文件夹。

接入 Syntax Highlighting：点击代码文件，在右侧显示高亮代码。

Phase 4: 视觉特效 (Visuals)
实现 贡献热力图。

实现 Star 趋势图。

